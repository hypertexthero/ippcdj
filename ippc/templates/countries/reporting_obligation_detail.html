{% extends "base.html" %}
{% load pages_tags mezzanine_tags i18n future staticfiles accounts_tags %}

{% block meta_title %}{% trans "Latest Reporting Obligation" %}{% endblock %}

{% block breadcrumb_menu %}
<li><a href="/{{ LANGUAGE_CODE }}/">{% trans "Home" %}</a><span class="divider">/</span></li>
<li><a href="/countries/">Countries</a><span class="divider">/</span></li>
<li><a href="/countries/{{reportingobligation.country.name|slugify}}/">{{reportingobligation.country.name}}</a><span class="divider">/</span></li>
<li><a href="/countries/{{reportingobligation.country.name|slugify}}/reportingobligation/{{reportingobligation.reporting_obligation_type}}">{{reportingobligation.get_reporting_obligation_type_display}}</a><span class="divider">/</span></li> 
{# This: https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.get_FOO_display #}
<li class="active">{{ reportingobligation.title }}</li>

{% endblock %}

{% block local_nav %}
<div class="well localnav">
     <script type="text/javascript">
    function toggle_visibility_rev(id) {
       var e = document.getElementById(id);
       if(e.style.display == 'block')
          e.style.display = 'none';
       else
          e.style.display = 'block';
    }
    </script>
     <p>
       {% if reportingobligation.is_version %}
          <a href="javascript:history.go(-1)">{% trans "Â« Go back" %}</a>
        {% else %}
             <p><a href="/countries/{{reportingobligation.country.name|slugify}}/reportingobligation/{{reportingobligation.reporting_obligation_type}}"> {% trans "Go Back" %}</a></p>
            {% if user.is_superuser %} 
                <a class="btn btn-small btn-info" href="/admin/ippc/reportingobligation/{{ reportingobligation.id }}">Edit as Admin</a><br>
            {% endif %}

            {% if perms.ippc.change_reportingobligation and request.user.get_profile.country.name == page.title %}
                <a class="btn btn-small btn-info" href="{% url 'reporting-obligation-edit' reportingobligation.country.name|slugify reportingobligation.id %}"><i class="icon-edit icon-white"></i> Edit</a>
            {% endif %}
 
        {% if versions %}
            <br><br>
             <strong><a href="#" onclick="toggle_visibility_rev('rev');">{% trans "Revisions" %}</a></strong>  <br>
            <div id="rev" style="display:none;">
            {% for object in versions %}
               <small><a href="{% url 'reporting-obligation-detail' object.country.country_slug object.publish_date|date:'Y' object.publish_date|date:'m'  object.slug %}"> {% blocktrans with sometime=object.modify_date|date:"d-m-Y H:i" %}{{ sometime }}{% endblocktrans %}</a></small><br>
            {% endfor %}
             </div>
        {% endif %}
    {% endif %}
    
    </p>
    
    
    
    
    
    
    
    
    
    
    
   
</div>
{% endblock local_nav %}

{% block pageinfo %}

{% endblock pageinfo %}

{% block main %}
<h1>{{ reportingobligation.title }}</h1> 

{% if reportingobligation.is_version %}
<dl class="dl-horizontal" style="border: 3px double red;    padding: 0.5em;">
 <dt>&#160;</dt>
  <dd style="color:red;">{% trans "old revision" %}</dd>

 {% else %}    
<dl class="dl-horizontal">
{% endif %}

  {% if reportingobligation.report_obligation_type %}
  <dt>{% trans "Reporting Obligation" %}</dt>
  <dd>
    <ul class="unstyled nomargin">
      <li>{{ reportingobligation.report_obligation_type_verbose }}</li>
    </ul>
  </dd>
  {% endif %}
  
 {% if reportingobligation.publication_date %}
  <dt>{% trans "Publication Date" %}</dt>
  <dd>{% blocktrans with sometime=reportingobligation.publication_date|date:"d-m-Y" %}{{ sometime }}{% endblocktrans %}</dd>
{% endif %}

  {% if reportingobligation.modify_date %}
    <dt>{% trans "Last Updated" %}</dt>
    <dd>{% blocktrans with sometime=reportingobligation.modify_date|date:"d-m-Y" %}{{ sometime }}{% endblocktrans %}</dd>
  {% endif %}


 {% if reportingobligation.short_description != ''  and reportingobligation.short_description != ''   %}
  <dt>{% trans "Short Description" %}</dt>
  <dd>{{ reportingobligation.short_description|richtext_filter|safe }}</dd>
  {% endif %}
  
  {% if reportingobligation.contact_for_more_information != ''  and reportingobligation.contact_for_more_information != ' ' %}
  <dt>{% trans "Contact for Info" %}</dt>
  <dd>{{ reportingobligation.contact_for_more_information }}</dd>
  {% endif %}
  
  {# {% if reportingobligation.author %}   #}
  {# <dt>{% trans "Author" %}</dt> #}
  {# <dd>{{ reportingobligation.author.get_profile.first_name }} {{ reportingobligation.author.get_profile.last_name }}</dd> #}
  {# {% endif %} #}
    
 
  
 
  
  {% if reportingobligation.issuename.all %}
    <dt>{% trans "Keywords" %}</dt>
    <dd>
      {% for entry in reportingobligation.issuename.all %}
        {% for e in entry.issuename.all %}
          {{e.name}}
        {% endfor %} 
      {% endfor %}
  </dd>
  {% endif %}
 
  
  
  {# {% if reportingobligation.commname.all %} #}
  {# <dt>{% trans "Commodity keywords" %}</dt> #}
  {# <dd> #}
  {#     {% for entry in reportingobligation.commname.all %} #}
  {#       {% for e in entry.commname.all %} #}
	{# <i class="icon-tag"></i> {{e.name}} #}
  {#       {% endfor %} #}
  {#     {% endfor %} #}
  {# </dd> #}
  {# {% endif %} #}
 
  
 
  
  {% if reportingobligation.reportingobligation_file_set.all %}
   
  <dt>{% trans "Report files" %}</dt>
   {% for f in reportingobligation.reportingobligation_file_set.all %} 
    
  <dd><a href="{{MEDIA_URL}}{{f.file.name}}">{{ f.description }}</a></dd>
{% endfor %}
  {% endif %}

   {% if reportingobligation.reportingobligationurl_set.all %}
   
  <dt>{% trans "Website" %}</dt>
   {% for f in reportingobligation.reportingobligationurl_set.all %} 
    
  <dd><a href="{{f.url_for_more_information}}">{{ f.url_for_more_information }}</a></dd>
{% endfor %}  {% endif %}
</dl>
{% endblock %}
